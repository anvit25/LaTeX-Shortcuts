\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{physics2}
\usephysicsmodule{ab}
\usephysicsmodule{xmat} %from physics2

% Number sets
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}

% Probability shortcuts
\newcommand{\G}{\mathcal{G}}
\newcommand{\F}{\mathcal{F}}
\newcommand{\B}{\mathcal{B}} % Borel sigma algebra

\DeclareMathOperator{\E}{\mathbb{E}}
\DeclareMathOperator{\pr}{\mathbb{P}}
\DeclareMathOperator{\var}{\mathbf{V}}
\DeclareMathOperator{\cov}{\mathbf{C}}

\newcommand{\indep}{\mathbin{\perp \negthickspace\negthickspace \perp}}
\newcommand{\eqd}{\overset{\mathcal{D}}{=}}
\newcommand{\convd}{\overset{\mathcal D}{\longrightarrow}}
\newcommand{\convas}{\overset{\textrm{a.s.}}{\longrightarrow}}
\newcommand{\convp}{\overset{\pr}{\longrightarrow}}
\newcommand{\iid}{\overset{iid}{\sim}}
\newcommand{\ddfrac}[2]{\frac{\displaystyle #1}{\displaystyle #2}}
% https://tex.stackexchange.com/questions/713353/specialize-behaviors-of-super-and-subscript-for-self-defined-commands/713355?noredirect=1#comment1772997_713355
\NewDocumentCommand{\expec}{e{_^}}{%
    \mathbb{E}%
    \IfNoValueF{#1}{_{#1}}%
    \IfNoValueF{#2}{^{#2}}%
    \ab
}
\NewDocumentCommand{\expectwo}{e{_^}m}{%
    \mathbb{E}%
    \IfNoValueF{#1}{_{#1}}%
    \IfNoValueF{#2}{^{#2}}%
    \bab{\pab{#3}^2}
}
\NewDocumentCommand{\conde}{e{_^}mm}{%
    \mathbb{E}%
    \IfNoValueF{#1}{_{#1}}%
    \IfNoValueF{#2}{^{#2}}%
    \bab{#3\mid #4}
}
\NewDocumentCommand{\normal}{e{_}}{
    \mathcal{N}
    \IfNoValueF{#1}{_{#1}}
    \ab
}

\newcommand{\inner}{\aab}
\newcommand{\abs}{\vab}
\newcommand{\norm}{\Vab}
\newcommand{\argmod}[2]{\underset{#2}{\arg \, #1}}
\DeclareMathOperator{\traux}{tr}
\newcommand{\tr}{\traux\ab}

\renewcommand{\O}{\mathcal{O}}
\newcommand{\I}{\mathbb I}
\newcommand{\1}{\mathbf 1}
\newcommand{\one}{\mathbf{1}}
\newcommand{\proj}[1]{#1\ab(#1^\top#1)^{-1}#1^{\top}}


\DeclareMathOperator{\proxaux}{prox}
\NewDocumentCommand{\prox}{e{_}}{%
    \proxaux%
    \IfNoValueF{#1}{_{#1}}%
    \ab
}
